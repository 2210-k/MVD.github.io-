<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>МВД РФ - Служебный портал</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1e3a8a;
            --primary-dark: #1e40af;
            --secondary: #3b82f6;
            --accent: #ef4444;
            --accent-dark: #dc2626;
            --success: #10b981;
            --warning: #f59e0b;
            --light: #f8fafc;
            --dark: #1e293b;
            --gray: #64748b;
            --light-gray: #e2e8f0;
            --border: #cbd5e1;
            --sidebar-width: 280px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
        }
        
        /* Сайдбар */
        .sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(180deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            height: 100vh;
            position: fixed;
            overflow-y: auto;
            box-shadow: 4px 0 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }
        
        .sidebar-header {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .sidebar-header i {
            font-size: 1.8rem;
            color: white;
        }
        
        .sidebar-header h1 {
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .nav-section {
            padding: 1rem 0;
        }
        
        .nav-title {
            padding: 0.5rem 1.5rem;
            font-size: 0.875rem;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 500;
            letter-spacing: 1px;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 0.9rem 1.5rem;
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .nav-item:hover, .nav-item.active {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            border-left-color: var(--secondary);
        }
        
        .nav-item i {
            font-size: 1.1rem;
            width: 20px;
            text-align: center;
        }
        
        /* Основной контент */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 2rem;
            min-height: 100vh;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .header h1 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .header-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        .current-date {
            background: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            font-weight: 500;
            color: var(--dark);
        }
        
        .day-counter {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .day-counter input {
            width: 60px;
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 0.25rem 0.5rem;
            text-align: center;
        }
        
        /* Карточки */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .stat-icon.primary {
            background: rgba(59, 130, 246, 0.1);
            color: var(--secondary);
        }
        
        .stat-icon.success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }
        
        .stat-icon.warning {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }
        
        .stat-icon.danger {
            background: rgba(239, 68, 68, 0.1);
            color: var(--accent);
        }
        
        .stat-info h3 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
            line-height: 1;
        }
        
        .stat-info p {
            color: var(--gray);
            font-size: 0.9rem;
            margin-top: 0.25rem;
        }
        
        /* Секции */
        .section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            font-size: 1.1rem;
        }
        
        /* Формы */
        .form-group {
            margin-bottom: 1.25rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
            background: white;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .form-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.25rem;
        }
        
        .form-col {
            flex: 1;
        }
        
        /* Кнопки */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 0.75rem 1.5rem;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .btn-danger {
            background-color: var(--accent);
        }
        
        .btn-danger:hover {
            background-color: var(--accent-dark);
        }
        
        .btn-success {
            background-color: var(--success);
        }
        
        .btn-warning {
            background-color: var(--warning);
        }
        
        .btn-outline {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }
        
        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }
        
        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }
        
        .form-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid var(--light-gray);
        }
        
        /* Таблицы */
        .table-container {
            overflow-x: auto;
            border-radius: 8px;
            border: 1px solid var(--light-gray);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--light-gray);
        }
        
        th {
            background-color: var(--light);
            font-weight: 600;
            color: var(--dark);
            position: sticky;
            top: 0;
        }
        
        tr:hover {
            background-color: rgba(0, 0, 0, 0.02);
        }
        
        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }
        
        /* Аккордеон */
        .accordion {
            margin-bottom: 1rem;
            border: 1px solid var(--light-gray);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .accordion-header {
            background-color: var(--light);
            padding: 1rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 500;
        }
        
        .accordion-content {
            padding: 1rem;
            max-height: 300px;
            overflow-y: auto;
            border-top: 1px solid var(--light-gray);
        }
        
        /* Поиск */
        .search-box {
            position: relative;
            margin-bottom: 1rem;
        }
        
        .search-box i {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }
        
        .search-box input {
            padding-left: 40px;
        }
        
        /* Статьи кодексов */
        .codex-section {
            margin-bottom: 1.5rem;
        }
        
        .codex-section h4 {
            margin-bottom: 0.5rem;
            color: var(--primary);
            font-size: 1rem;
        }
        
        .codex-item {
            padding: 0.75rem;
            cursor: pointer;
            border-bottom: 1px solid var(--light-gray);
            transition: background-color 0.2s;
        }
        
        .codex-item:hover {
            background-color: var(--light);
        }
        
        /* Категории */
        .categories {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        
        .category {
            background-color: #e0f2fe;
            color: #0369a1;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.875rem;
        }
        
        /* Статусы */
        .status-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .status-active {
            background-color: #d1fae5;
            color: #065f46;
        }
        
        .status-inactive {
            background-color: #fee2e2;
            color: #991b1b;
        }
        
        /* Алерты */
        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .alert-success {
            background-color: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }
        
        .alert-error {
            background-color: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }
        
        /* Состояние пусто */
        .empty-state {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--gray);
        }
        
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--light-gray);
        }
        
        /* Вкладки */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 1.5rem;
        }
        
        .tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tab.active {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }
        
        .tab:hover:not(.active) {
            background-color: var(--light);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Скрытые элементы */
        .hidden {
            display: none !important;
        }
        
        /* Адаптивность */
        @media (max-width: 1024px) {
            .sidebar {
                width: 80px;
            }
            
            .sidebar-header h1, .nav-title, .nav-item span {
                display: none;
            }
            
            .sidebar-header {
                justify-content: center;
                padding: 1rem;
            }
            
            .nav-item {
                justify-content: center;
                padding: 1rem;
            }
            
            .main-content {
                margin-left: 80px;
            }
        }
        
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .header-actions {
                width: 100%;
                justify-content: space-between;
            }
        }
    </style>
</head>
<body>
    <!-- Сайдбар -->
    <div class="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-shield-alt"></i>
            <h1>МВД РФ</h1>
        </div>
        
        <div class="nav-section">
            <div class="nav-title">Основные разделы</div>
            <a href="#" class="nav-item active" data-section="dashboard">
                <i class="fas fa-tachometer-alt"></i>
                <span>Главная панель</span>
            </a>
            <a href="#" class="nav-item" data-section="actions">
                <i class="fas fa-clipboard-list"></i>
                <span>Служебные действия</span>
            </a>
            <a href="#" class="nav-item" data-section="licenses">
                <i class="fas fa-id-card"></i>
                <span>Водительские удостоверения</span>
            </a>
            <a href="#" class="nav-item" data-section="reports">
                <i class="fas fa-file-alt"></i>
                <span>Отчеты</span>
            </a>
        </div>
        
        <div class="nav-section">
            <div class="nav-title">Кодексы</div>
            <a href="#" class="nav-item" data-section="road-code">
                <i class="fas fa-car"></i>
                <span>Дорожный кодекс</span>
            </a>
            <a href="#" class="nav-item" data-section="admin-code">
                <i class="fas fa-gavel"></i>
                <span>КОАП РФ</span>
            </a>
            <a href="#" class="nav-item" data-section="criminal-code">
                <i class="fas fa-balance-scale"></i>
                <span>Уголовный кодекс</span>
            </a>
        </div>
    </div>
    
    <!-- Основной контент -->
    <div class="main-content">
        <div class="header">
            <h1><i class="fas fa-tachometer-alt"></i> Служебный портал МВД</h1>
            <div class="header-actions">
                <div class="current-date">04 августа 2025 года</div>
                <div class="day-counter">
                    <span>Игровой день:</span>
                    <input type="number" id="game-day-input" value="0" min="0" max="10000">
                    <button class="btn btn-sm" id="update-day-btn">Обновить</button>
                </div>
            </div>
        </div>
        
        <!-- Главная панель -->
        <div class="section-content active" id="dashboard">
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-icon primary">
                        <i class="fas fa-car"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="total-actions">0</h3>
                        <p>Всего действий</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon success">
                        <i class="fas fa-id-card"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="total-licenses">0</h3>
                        <p>ВУ в базе</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon warning">
                        <i class="fas fa-car-crash"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="total-accidents">0</h3>
                        <p>ДТП зарегистрировано</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon danger">
                        <i class="fas fa-handcuffs"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="total-arrests">0</h3>
                        <p>Арестов произведено</p>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-history"></i> Последние действия</h2>
                    <button class="btn" id="new-action-btn"><i class="fas fa-plus"></i> Новое действие</button>
                </div>
                <div class="table-container">
                    <table id="recent-actions-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Дата</th>
                                <th>Тип</th>
                                <th>Действие</th>
                                <th>Объект</th>
                                <th>Инспектор</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Данные будут заполняться через JavaScript -->
                        </tbody>
                    </table>
                </div>
                <div id="recent-empty-state" class="empty-state hidden">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>Нет действий</h3>
                    <p>Начните работу, создав новое действие.</p>
                </div>
            </div>
        </div>
        
        <!-- Служебные действия -->
        <div class="section-content" id="actions">
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-clipboard-list"></i> Служебные действия</h2>
                    <div class="tabs">
                        <div class="tab active" data-action-type="vehicle">
                            <i class="fas fa-car"></i> Остановка ТС
                        </div>
                        <div class="tab" data-action-type="pedestrian">
                            <i class="fas fa-user"></i> Оформление гражданина
                        </div>
                        <div class="tab" data-action-type="accident">
                            <i class="fas fa-car-crash"></i> Оформление ДТП
                        </div>
                        <div class="tab" data-action-type="arrest">
                            <i class="fas fa-handcuffs"></i> Арест гражданина
                        </div>
                    </div>
                </div>
                
                <!-- Форма для оформления ТС -->
                <div class="tab-content active" id="vehicle-form">
                    <form id="vehicle-action-form">
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="action-id">Уникальный номер записи</label>
                                    <input type="text" id="action-id" readonly>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="action-date">Дата (ДД.ММ.ГГ)</label>
                                    <input type="text" id="action-date" placeholder="ДД.ММ.ГГ" value="04.08.2025">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="action-type-select">Действие</label>
                            <select id="action-type-select">
                                <option value="stop">Остановка Т/С</option>
                                <option value="fine">Административный штраф</option>
                                <option value="license-revoke">Лишение водительского удостоверения</option>
                            </select>
                        </div>
                        
                        <div class="form-group" id="fine-amount-container" style="display: none;">
                            <label for="fine-amount">Сумма штрафа</label>
                            <input type="number" id="fine-amount" min="0">
                        </div>
                        
                        <div class="form-group">
                            <label for="reason">Причина / Статья</label>
                            <div class="accordion">
                                <div class="accordion-header" id="codex-accordion-header">
                                    <span><i class="fas fa-book"></i> Выбрать из кодексов</span>
                                    <span>▼</span>
                                </div>
                                <div class="accordion-content" id="codex-accordion-content" style="display: none;">
                                    <div class="search-box">
                                        <i class="fas fa-search"></i>
                                        <input type="text" id="codex-search" placeholder="Поиск статьи...">
                                    </div>
                                    
                                    <div class="codex-section">
                                        <h4>Дорожный кодекс РФ</h4>
                                        <div id="dk-list">
                                            <!-- Список статей ДК будет заполнен через JavaScript -->
                                        </div>
                                    </div>
                                    
                                    <div class="codex-section">
                                        <h4>Кодекс об административных правонарушениях РФ</h4>
                                        <div id="koap-list">
                                            <!-- Список статей КОАП будет заполнен через JavaScript -->
                                        </div>
                                    </div>
                                    
                                    <div class="codex-section">
                                        <h4>Уголовный кодекс РФ</h4>
                                        <div id="uk-list">
                                            <!-- Список статей УК будет заполнен через JavaScript -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <input type="text" id="reason" placeholder="Статья и описание нарушения">
                        </div>
                        
                        <div class="form-group">
                            <label for="custom-reason">Дополнительная информация</label>
                            <textarea id="custom-reason" rows="3" placeholder="Дополнительные сведения о нарушении"></textarea>
                        </div>
                        
                        <h3 class="section-title" style="margin-top: 2rem; margin-bottom: 1rem;">
                            <i class="fas fa-car-side"></i> Сведения о транспортном средстве
                        </h3>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="vehicle-brand">Марка</label>
                                    <input type="text" id="vehicle-brand">
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="vehicle-model">Модель</label>
                                    <input type="text" id="vehicle-model">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="vehicle-color">Цвет</label>
                                    <input type="text" id="vehicle-color">
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="vehicle-plate">Госномер</label>
                                    <input type="text" id="vehicle-plate">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="vehicle-ownership">Тип владения</label>
                            <select id="vehicle-ownership">
                                <option value="personal">Личное</option>
                                <option value="rental">Арендованное</option>
                            </select>
                        </div>
                        
                        <h3 class="section-title" style="margin-top: 2rem; margin-bottom: 1rem;">
                            <i class="fas fa-user"></i> Сведения о владельце
                        </h3>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="owner-name">Имя</label>
                                    <input type="text" id="owner-name">
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="owner-patronymic">Отчество</label>
                                    <input type="text" id="owner-patronymic">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="owner-passport">№ Паспорта</label>
                            <input type="text" id="owner-passport">
                        </div>
                        
                        <div class="form-group">
                            <label for="owner-license">Водительское удостоверение</label>
                            <div class="form-row">
                                <div class="form-col">
                                    <input type="text" id="owner-license">
                                </div>
                                <div class="form-col">
                                    <button type="button" class="btn" id="check-license-btn">
                                        <i class="fas fa-search"></i> Проверить ВУ
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div id="license-check-result"></div>
                        
                        <h3 class="section-title" style="margin-top: 2rem; margin-bottom: 1rem;">
                            <i class="fas fa-user-shield"></i> Инспектор
                        </h3>
                        
                        <div class="form-group">
                            <label for="inspector-name">ФИО инспектора</label>
                            <input type="text" id="inspector-name">
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn">
                                <i class="fas fa-save"></i> Сохранить действие
                            </button>
                            <button type="button" class="btn btn-outline" id="clear-form-btn">
                                <i class="fas fa-times"></i> Очистить форму
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Форма для оформления пешего гражданина -->
                <div class="tab-content" id="pedestrian-form">
                    <form id="pedestrian-action-form">
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="pedestrian-action-id">Уникальный номер записи</label>
                                    <input type="text" id="pedestrian-action-id" readonly>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="pedestrian-action-date">Дата (ДД.ММ.ГГ)</label>
                                    <input type="text" id="pedestrian-action-date" placeholder="ДД.ММ.ГГ" value="04.08.2025">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="pedestrian-action-type">Действие</label>
                            <select id="pedestrian-action-type">
                                <option value="check">Проверка документов</option>
                                <option value="fine">Административный штраф</option>
                                <option value="detention">Задержание</option>
                            </select>
                        </div>
                        
                        <div class="form-group" id="pedestrian-fine-amount-container" style="display: none;">
                            <label for="pedestrian-fine-amount">Сумма штрафа</label>
                            <input type="number" id="pedestrian-fine-amount" min="0">
                        </div>
                        
                        <div class="form-group">
                            <label for="pedestrian-reason">Причина / Статья</label>
                            <input type="text" id="pedestrian-reason" placeholder="Статья и описание нарушения">
                        </div>
                        
                        <div class="form-group">
                            <label for="pedestrian-custom-reason">Дополнительная информация</label>
                            <textarea id="pedestrian-custom-reason" rows="3" placeholder="Дополнительные сведения о нарушении"></textarea>
                        </div>
                        
                        <h3 class="section-title" style="margin-top: 2rem; margin-bottom: 1rem;">
                            <i class="fas fa-user"></i> Сведения о гражданине
                        </h3>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="pedestrian-name">Имя</label>
                                    <input type="text" id="pedestrian-name">
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="pedestrian-patronymic">Отчество</label>
                                    <input type="text" id="pedestrian-patronymic">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="pedestrian-passport">№ Паспорта</label>
                            <input type="text" id="pedestrian-passport">
                        </div>
                        
                        <div class="form-group">
                            <label for="pedestrian-address">Адрес проживания</label>
                            <input type="text" id="pedestrian-address">
                        </div>
                        
                        <h3 class="section-title" style="margin-top: 2rem; margin-bottom: 1rem;">
                            <i class="fas fa-user-shield"></i> Инспектор
                        </h3>
                        
                        <div class="form-group">
                            <label for="pedestrian-inspector-name">ФИО инспектора</label>
                            <input type="text" id="pedestrian-inspector-name">
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn">
                                <i class="fas fa-save"></i> Сохранить действие
                            </button>
                            <button type="button" class="btn btn-outline" id="clear-pedestrian-form-btn">
                                <i class="fas fa-times"></i> Очистить форму
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Форма для оформления ДТП -->
                <div class="tab-content" id="accident-form">
                    <form id="accident-report-form">
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="accident-id">Уникальный номер отчета</label>
                                    <input type="text" id="accident-id" readonly>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="accident-date">Дата (ДД.ММ.ГГ)</label>
                                    <input type="text" id="accident-date" placeholder="ДД.ММ.ГГ" value="04.08.2025">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="accident-location">Место ДТП</label>
                            <input type="text" id="accident-location" placeholder="Улица, район, город">
                        </div>
                        
                        <div class="form-group">
                            <label for="accident-description">Описание ДТП</label>
                            <textarea id="accident-description" rows="4" placeholder="Подробное описание обстоятельств ДТП"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="accident-damage">Нанесенный ущерб</label>
                            <textarea id="accident-damage" rows="3" placeholder="Описание повреждений ТС и другого имущества"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="accident-injured">Пострадавшие</label>
                            <textarea id="accident-injured" rows="3" placeholder="Сведения о пострадавших, характер травм"></textarea>
                        </div>
                        
                        <h3 class="section-title" style="margin-top: 2rem; margin-bottom: 1rem;">
                            <i class="fas fa-car"></i> Участники ДТП
                        </h3>
                        
                        <div id="accident-participants">
                            <div class="participant-form">
                                <h4>Участник 1</h4>
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="participant1-name">ФИО</label>
                                            <input type="text" id="participant1-name">
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="participant1-license">ВУ</label>
                                            <input type="text" id="participant1-license">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="participant1-vehicle">ТС</label>
                                            <input type="text" id="participant1-vehicle" placeholder="Марка, модель, госномер">
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="participant1-insurance">Страховка</label>
                                            <input type="text" id="participant1-insurance" placeholder="Номер полиса ОСАГО">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="participant-form">
                                <h4>Участник 2</h4>
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="participant2-name">ФИО</label>
                                            <input type="text" id="participant2-name">
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="participant2-license">ВУ</label>
                                            <input type="text" id="participant2-license">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="participant2-vehicle">ТС</label>
                                            <input type="text" id="participant2-vehicle" placeholder="Марка, модель, госномер">
                                        </div>
                                    </div>
                                    <div class="form-col">
                                        <div class="form-group">
                                            <label for="participant2-insurance">Страховка</label>
                                            <input type="text" id="participant2-insurance" placeholder="Номер полиса ОСАГО">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <button type="button" class="btn btn-outline" id="add-participant-btn">
                            <i class="fas fa-plus"></i> Добавить участника
                        </button>
                        
                        <h3 class="section-title" style="margin-top: 2rem; margin-bottom: 1rem;">
                            <i class="fas fa-user-shield"></i> Инспектор
                        </h3>
                        
                        <div class="form-group">
                            <label for="accident-inspector-name">ФИО инспектора</label>
                            <input type="text" id="accident-inspector-name">
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn">
                                <i class="fas fa-save"></i> Сохранить отчет о ДТП
                            </button>
                            <button type="button" class="btn btn-outline" id="clear-accident-form-btn">
                                <i class="fas fa-times"></i> Очистить форму
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Форма для ареста гражданина -->
                <div class="tab-content" id="arrest-form">
                    <form id="arrest-report-form">
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="arrest-id">Уникальный номер отчета</label>
                                    <input type="text" id="arrest-id" readonly>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="arrest-date">Дата (ДД.ММ.ГГ)</label>
                                    <input type="text" id="arrest-date" placeholder="ДД.ММ.ГГ" value="04.08.2025">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="arrest-location">Место ареста</label>
                            <input type="text" id="arrest-location" placeholder="Улица, район, город">
                        </div>
                        
                        <div class="form-group">
                            <label for="arrest-reason">Основание для ареста</label>
                            <textarea id="arrest-reason" rows="3" placeholder="Подробное описание причины ареста"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="arrest-article">Статья</label>
                            <input type="text" id="arrest-article" placeholder="Статья УК РФ или КОАП РФ">
                        </div>
                        
                        <h3 class="section-title" style="margin-top: 2rem; margin-bottom: 1rem;">
                            <i class="fas fa-user"></i> Сведения о задержанном
                        </h3>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="arrested-name">Имя</label>
                                    <input type="text" id="arrested-name">
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="arrested-patronymic">Отчество</label>
                                    <input type="text" id="arrested-patronymic">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="arrested-passport">№ Паспорта</label>
                            <input type="text" id="arrested-passport">
                        </div>
                        
                        <div class="form-group">
                            <label for="arrested-address">Адрес проживания</label>
                            <input type="text" id="arrested-address">
                        </div>
                        
                        <div class="form-group">
                            <label for="arrested-birthdate">Дата рождения</label>
                            <input type="text" id="arrested-birthdate" placeholder="ДД.ММ.ГГГГ">
                        </div>
                        
                        <h3 class="section-title" style="margin-top: 2rem; margin-bottom: 1rem;">
                            <i class="fas fa-user-shield"></i> Инспектор
                        </h3>
                        
                        <div class="form-group">
                            <label for="arrest-inspector-name">ФИО инспектора</label>
                            <input type="text" id="arrest-inspector-name">
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn">
                                <i class="fas fa-save"></i> Сохранить отчет об аресте
                            </button>
                            <button type="button" class="btn btn-outline" id="clear-arrest-form-btn">
                                <i class="fas fa-times"></i> Очистить форму
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-history"></i> История действий</h2>
                    <button class="btn btn-danger" id="clear-history-btn">
                        <i class="fas fa-trash"></i> Очистить историю
                    </button>
                </div>
                <div class="table-container">
                    <table id="actions-history-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Дата</th>
                                <th>Тип</th>
                                <th>Действие</th>
                                <th>Объект</th>
                                <th>Статья</th>
                                <th>Инспектор</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Данные будут заполняться через JavaScript -->
                        </tbody>
                    </table>
                </div>
                <div id="history-empty-state" class="empty-state hidden">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>Нет записей о действиях</h3>
                    <p>Начните работу, создав новое действие.</p>
                </div>
            </div>
        </div>
        
        <!-- Водительские удостоверения -->
        <div class="section-content" id="licenses">
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-id-card"></i> Реестр водительских удостоверений</h2>
                    <div>
                        <button class="btn" id="add-license-btn">
                            <i class="fas fa-plus"></i> Добавить ВУ
                        </button>
                    </div>
                </div>
                
                <!-- Форма добавления/редактирования ВУ -->
                <div id="license-form" class="hidden">
                    <form id="license-data-form">
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="license-id">Уникальный номер ВУ</label>
                                    <input type="text" id="license-id" readonly>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="license-number">№ Водительского удостоверения</label>
                                    <input type="text" id="license-number">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="license-name">Имя</label>
                                    <input type="text" id="license-name">
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="license-patronymic">Отчество</label>
                                    <input type="text" id="license-patronymic">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="license-passport">№ Паспорта</label>
                            <input type="text" id="license-passport">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="license-issue-date">Дата выдачи (ДД.ММ.ГГ)</label>
                                    <input type="text" id="license-issue-date" placeholder="ДД.ММ.ГГ">
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="license-issue-game-day">Игровой день выдачи</label>
                                    <input type="number" id="license-issue-game-day" min="0" max="10000">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="license-valid-date">Действительно до (ДД.ММ.ГГ)</label>
                                    <input type="text" id="license-valid-date" placeholder="ДД.ММ.ГГ">
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="license-valid-game-day">Игровой день окончания</label>
                                    <input type="number" id="license-valid-game-day" min="0" max="10000">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Категории</label>
                            <div class="categories">
                                <label><input type="checkbox" name="license-category" value="A"> A</label>
                                <label><input type="checkbox" name="license-category" value="A1"> A1</label>
                                <label><input type="checkbox" name="license-category" value="M"> M</label>
                                <label><input type="checkbox" name="license-category" value="B"> B</label>
                                <label><input type="checkbox" name="license-category" value="B1"> B1</label>
                                <label><input type="checkbox" name="license-category" value="C"> C</label>
                                <label><input type="checkbox" name="license-category" value="D"> D</label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="license-status">Статус</label>
                            <select id="license-status">
                                <option value="active">Действительно</option>
                                <option value="inactive">Недействительно</option>
                            </select>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn">
                                <i class="fas fa-save"></i> Сохранить ВУ
                            </button>
                            <button type="button" class="btn btn-outline" id="cancel-license-btn">
                                <i class="fas fa-times"></i> Отмена
                            </button>
                        </div>
                    </form>
                </div>
                
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="license-search" placeholder="Поиск по номеру ВУ, имени или паспорту...">
                </div>
                
                <!-- Таблица с ВУ -->
                <div class="table-container">
                    <table id="licenses-table">
                        <thead>
                            <tr>
                                <th>№ ВУ</th>
                                <th>Владелец</th>
                                <th>№ Паспорта</th>
                                <th>Дата выдачи</th>
                                <th>Действительно до</th>
                                <th>Категории</th>
                                <th>Статус</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Данные будут заполняться через JavaScript -->
                        </tbody>
                    </table>
                </div>
                <div id="licenses-empty-state" class="empty-state hidden">
                    <i class="fas fa-id-card"></i>
                    <h3>Нет водительских удостоверений</h3>
                    <p>Добавьте первое водительское удостоверение с помощью кнопки выше.</p>
                </div>
            </div>
        </div>
        
        <!-- Отчеты -->
        <div class="section-content" id="reports">
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-file-alt"></i> Отчеты</h2>
                    <div class="tabs">
                        <div class="tab active" data-report-type="accidents">
                            <i class="fas fa-car-crash"></i> Отчеты о ДТП
                        </div>
                        <div class="tab" data-report-type="arrests">
                            <i class="fas fa-handcuffs"></i> Отчеты об арестах
                        </div>
                    </div>
                </div>
                
                <!-- Отчеты о ДТП -->
                <div class="tab-content active" id="accidents-reports">
                    <div class="table-container">
                        <table id="accidents-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Дата</th>
                                    <th>Место</th>
                                    <th>Участники</th>
                                    <th>Ущерб</th>
                                    <th>Инспектор</th>
                                    <th>Действия</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Данные будут заполняться через JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    <div id="accidents-empty-state" class="empty-state hidden">
                        <i class="fas fa-car-crash"></i>
                        <h3>Нет отчетов о ДТП</h3>
                        <p>Отчеты о ДТП появятся здесь после их оформления.</p>
                    </div>
                </div>
                
                <!-- Отчеты об арестах -->
                <div class="tab-content" id="arrests-reports">
                    <div class="table-container">
                        <table id="arrests-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Дата</th>
                                    <th>Задержанный</th>
                                    <th>Место</th>
                                    <th>Статья</th>
                                    <th>Инспектор</th>
                                    <th>Действия</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Данные будут заполняться через JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    <div id="arrests-empty-state" class="empty-state hidden">
                        <i class="fas fa-handcuffs"></i>
                        <h3>Нет отчетов об арестах</h3>
                        <p>Отчеты об арестах появятся здесь после их оформления.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Кодексы -->
        <div class="section-content" id="road-code">
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-car"></i> Дорожный кодекс РФ</h2>
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="road-code-search" placeholder="Поиск по статьям...">
                    </div>
                </div>
                <div class="table-container">
                    <table id="road-code-table">
                        <thead>
                            <tr>
                                <th>Статья</th>
                                <th>Нарушение</th>
                                <th>Наказание</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Данные будут заполняться через JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="section-content" id="admin-code">
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-gavel"></i> Кодекс об административных правонарушениях РФ</h2>
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="admin-code-search" placeholder="Поиск по статьям...">
                    </div>
                </div>
                <div class="table-container">
                    <table id="admin-code-table">
                        <thead>
                            <tr>
                                <th>Статья</th>
                                <th>Нарушение</th>
                                <th>Наказание</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Данные будут заполняться через JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="section-content" id="criminal-code">
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-balance-scale"></i> Уголовный кодекс РФ</h2>
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="criminal-code-search" placeholder="Поиск по статьям...">
                    </div>
                </div>
                <div class="table-container">
                    <table id="criminal-code-table">
                        <thead>
                            <tr>
                                <th>Статья</th>
                                <th>Нарушение</th>
                                <th>Наказание</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Данные будут заполняться через JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Данные кодексов
        const roadCode = [
            { article: "1.1.1", violation: "Управление ТС без водительского удостоверения", penalty: "5000-20000" },
            { article: "1.1.2", violation: "Управление ТС водителем, лишенным права управления", penalty: "25000 или арест" },
            { article: "1.2.1", violation: "Управление ТС в состоянии алкогольного или иного опьянения", penalty: "10000 + лишение права" },
            { article: "1.2.2", violation: "Управление ТС в состоянии опьянения без прав или лишенным прав", penalty: "30000 или арест" },
            { article: "1.2.3", violation: "Отказ от медицинского освидетельствования на состояние опьянения", penalty: "30000 + лишение права" },
            { article: "1.3", violation: "Управление технически неисправным ТС", penalty: "500-1500 + эвакуация" },
            { article: "1.4", violation: "Управление ТС без действующего полиса ОСАГО", penalty: "3000" },
            { article: "1.5", violation: "Управление ТС без регистрационных документов", penalty: "4500 + задержание ТС" },
            { article: "2.1.1", violation: "Превышение скорости на 20-40 км/ч", penalty: "500" },
            { article: "2.1.2", violation: "Превышение скорости на 40-60 км/ч", penalty: "1000-1500" },
            { article: "2.1.3", violation: "Превышение скорости на 60-80 км/ч", penalty: "2000-2500 или лишение права" },
            { article: "2.1.4", violation: "Превышение скорости более чем на 80 км/ч", penalty: "5000 или лишение права" },
            { article: "2.1.5", violation: "Повторное нарушение правил скоростного ограничения", penalty: "5500 + лишение права" },
            { article: "2.2", violation: "Движение без необходимости со слишком малой скоростью", penalty: "1000-1500" },
            { article: "3.1", violation: "Выезд на встречную полосу для объезда препятствия", penalty: "1500-2000" },
            { article: "3.2.1", violation: "Выезд на встречную полосу НЕ для объезда препятствия", penalty: "5000 или лишение права" },
            { article: "3.2.2", violation: "Повторный выезд на встречную полосу НЕ для объезда препятствия", penalty: "6000 + лишение права" },
            { article: "3.3", violation: "Несоблюдение требований, предписанных дорожными знаками или разметкой", penalty: "1000-1500" },
            { article: "3.4", violation: "Нарушение правил расположения ТС на проезжей части", penalty: "1500" },
            { article: "3.5", violation: "Нарушение правил остановки или стоянки", penalty: "2000-3500" },
            { article: "3.6", violation: "Опасное вождение", penalty: "5000" },
            { article: "3.7", violation: "Нарушение правил проезда перекрестков", penalty: "1000" },
            { article: "3.8", violation: "Невыполнение требования ПДД уступить дорогу", penalty: "1500-2500" },
            { article: "3.9", violation: "Нарушение правил поворота или разворота", penalty: "1000-1500" },
            { article: "3.10", violation: "Невключение или несвоевременное выключение указателей поворота", penalty: "500" },
            { article: "3.11", violation: "Движение задним ходом в запрещенных местах", penalty: "2000" },
            { article: "4.1.1", violation: "Участие в ДТП (с причинением легкого/среднего вреда здоровью)", penalty: "5000-15000 или лишение права" },
            { article: "4.1.2", violation: "Оставление места ДТП участником", penalty: "20000 + лишение права" },
            { article: "4.2", violation: "Негорящие (неисправные) фары и габаритные огни", penalty: "500" },
            { article: "4.3", violation: "Нарушение правил перевозки грузов", penalty: "1500-2000" },
            { article: "4.4", violation: "Загрязнение номерных знаков", penalty: "500" },
            { article: "5.1.1", violation: "Невыполнение законного требования сотрудника полиции", penalty: "1500-2000" },
            { article: "5.1.2", violation: "Невыполнение законного требования сотрудника полиции об остановке ТС", penalty: "2000-2500" },
            { article: "5.2", violation: "Оказание сопротивления или неповиновение законному распоряжению сотрудника полиции", penalty: "3000-5000 или арест" }
        ];

        const administrativeCode = [
            { article: "1.1", violation: "Оскорбление, унижение чести в отношении гражданского лица", penalty: "7000-10000" },
            { article: "1.2", violation: "Клевета", penalty: "10000-12000" },
            { article: "1.3", violation: "Дискриминация", penalty: "10000" },
            { article: "1.4", violation: "Мелкое хулиганство", penalty: "5000" },
            { article: "1.5", violation: "Порча госдокумента", penalty: "5000-10000" },
            { article: "2.1", violation: "Организация несанкционированного публичного собрания", penalty: "20000 и арест" },
            { article: "2.2", violation: "Участие в несанкционированном публичном собрании", penalty: "5000 или арест" },
            { article: "2.3", violation: "Громкое прослушивание музыки после 23:00", penalty: "6500" },
            { article: "2.4", violation: "Организация блокирования транспортных коммуникаций", penalty: "12500" },
            { article: "2.5", violation: "Нарушение правил перевозки оружия", penalty: "20000 и конфискация" },
            { article: "2.6", violation: "Нарушение общественного порядка", penalty: "8000 или арест" },
            { article: "3.1", violation: "Заведомо ложный вызов специализированных служб", penalty: "30000" },
            { article: "3.2", violation: "Применение насилия в отношении представителя власти", penalty: "10000 и арест" },
            { article: "3.3", violation: "Оскорбление представителя власти", penalty: "15000" }
        ];

        const criminalCode = [
            { article: "1.1", violation: "Убийство", penalty: "Пожизненное лишение свободы" },
            { article: "1.2", violation: "Убийство по неосторожности", penalty: "Лишение свободы на 5 лет" },
            { article: "1.3", violation: "Умышленное причинение тяжкого вреда здоровью", penalty: "Лишение свободы на 3 года" },
            { article: "1.4", violation: "Умышленное причинение средней тяжести вреда здоровью", penalty: "Лишение свободы на 2 года" },
            { article: "1.5", violation: "Умышленное причинение легкого вреда здоровью", penalty: "Лишение свободы на 1 год" },
            { article: "1.6", violation: "Побои или иные насильственные действия", penalty: "Штраф 12000 и арест" },
            { article: "1.7", violation: "Угроза убийством или причинением тяжкого вреда здоровью", penalty: "Арест" },
            { article: "1.8", violation: "Неоказание помощи больному", penalty: "Штраф 18500" },
            { article: "1.9", violation: "Заведомое оставление без помощи лица", penalty: "Штраф 15000" },
            { article: "2.1", violation: "Похищение человека", penalty: "Арест" },
            { article: "2.2", violation: "Незаконное лишение человека свободы", penalty: "Арест" },
            { article: "2.3", violation: "Клевета", penalty: "Штраф 7800" },
            { article: "3.1", violation: "Дискриминация", penalty: "По ситуации" },
            { article: "3.2", violation: "Незаконное собирание или распространение сведений о частной жизни", penalty: "По ситуации" },
            { article: "3.3", violation: "Нарушение тайны переписки", penalty: "По ситуации" },
            { article: "3.4", violation: "Незаконное проникновение в жилище", penalty: "По ситуации" },
            { article: "3.5", violation: "Неправомерный отказ должностного лица", penalty: "По ситуации" },
            { article: "4.1", violation: "Кража", penalty: "По ситуации" },
            { article: "4.2", violation: "Грабеж", penalty: "По ситуации" },
            { article: "4.3", violation: "Разбой", penalty: "По ситуации" },
            { article: "4.4", violation: "Мошенничество", penalty: "По ситуации" },
            { article: "4.5", violation: "Вымогательство", penalty: "По ситуации" },
            { article: "4.6", violation: "Умышленные уничтожение или повреждение чужого имущества", penalty: "По ситуации" },
            { article: "5.1", violation: "Террористический акт", penalty: "По ситуации" },
            { article: "5.2", violation: "Содействие террористической деятельности", penalty: "По ситуации" },
            { article: "5.3", violation: "Несообщение в органы власти о преступлении", penalty: "По ситуации" },
            { article: "5.4", violation: "Захват или удержание лица в качестве заложника", penalty: "По ситуации" },
            { article: "5.5", violation: "Заведомо ложное сообщение о готовящихся взрыве", penalty: "По ситуации" },
            { article: "5.6", violation: "Создание устойчивой вооруженной группы (банды)", penalty: "По ситуации" },
            { article: "5.7", violation: "Организация преступного сообщества", penalty: "По ситуации" },
            { article: "5.8", violation: "Занятие высшего положения в преступной иерархии", penalty: "По ситуации" },
            { article: "5.9", violation: "Организация массовых беспорядков", penalty: "По ситуации" },
            { article: "5.10", violation: "Хулиганство", penalty: "По ситуации" },
            { article: "5.11", violation: "Вандализм", penalty: "По ситуации" },
            { article: "5.12.1", violation: "Незаконное проникновение на охраняемый объект", penalty: "По ситуации" },
            { article: "5.12.2", violation: "Неоднократное проникновение на служебную территорию", penalty: "По ситуации" },
            { article: "5.13", violation: "Незаконные приобретение, передача огнестрельного оружия", penalty: "По ситуации" },
            { article: "5.14", violation: "Незаконные использование или применение огнестрельного оружия", penalty: "По ситуации" },
            { article: "5.15", violation: "Ношение оружия в открытом виде в общественных местах", penalty: "По ситуации" },
            { article: "6.1", violation: "Нарушение ПДД, повлекшее тяжкий вред здоровью", penalty: "По ситуации" },
            { article: "6.2", violation: "Нарушение ПДД, повлекшее смерть", penalty: "По ситуации" },
            { article: "7.1", violation: "Посягательство на жизнь сотрудника правоохранительного органа", penalty: "По ситуации" },
            { article: "7.2", violation: "Применения насилия в отношении представителя власти", penalty: "По ситуации" },
            { article: "7.3", violation: "Оскорбление представителя власти", penalty: "По ситуации" },
            { article: "8.1.1", violation: "Заведомо ложный донос о совершении преступления", penalty: "По ситуации" },
            { article: "8.1.2", violation: "Дача заведомо ложных показаний при допросе", penalty: "По ситуации" },
            { article: "8.1.3", violation: "Дача заведомо ложных показаний в суде", penalty: "По ситуации" },
            { article: "8.2.1", violation: "Неуважение к суду", penalty: "Штраф 20000" },
            { article: "8.2.2", violation: "Оскорбление судьи, присяжного заседателя", penalty: "Штраф 25000 или арест" },
            { article: "8.3", violation: "Укрывательство от преступлений", penalty: "По ситуации" },
            { article: "8.4", violation: "Побег из места лишения свободы", penalty: "По ситуации" },
            { article: "9.1", violation: "Вооруженный мятеж", penalty: "По ситуации" },
            { article: "9.2", violation: "Превышение должностных полномочий", penalty: "По ситуации" },
            { article: "9.3", violation: "Незаконное присвоение звания", penalty: "По ситуации" },
            { article: "9.4", violation: "Получение взятки", penalty: "По ситуации" },
            { article: "9.5", violation: "Дача взятки", penalty: "По ситуации" },
            { article: "9.6", violation: "Халатность", penalty: "По ситуации" },
            { article: "9.7", violation: "Разглашение государственной тайны", penalty: "По ситуации" },
            { article: "10.1", violation: "Незаконные изготовление, приобретение, продажа, хранение наркотических веществ", penalty: "По ситуации" },
            { article: "10.2", violation: "Незаконные приобретение, хранение, перевозка наркотических средств", penalty: "Штраф 10000 + арест" }
        ];

        // Глобальные переменные для хранения данных
        let actions = JSON.parse(localStorage.getItem('mvd_actions')) || [];
        let licenses = JSON.parse(localStorage.getItem('mvd_licenses')) || [];
        let accidents = JSON.parse(localStorage.getItem('mvd_accidents')) || [];
        let arrests = JSON.parse(localStorage.getItem('mvd_arrests')) || [];
        let currentGameDay = parseInt(localStorage.getItem('mvd_gameDay')) || 0;

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            // Установка текущего игрового дня
            document.getElementById('game-day-input').value = currentGameDay;
            
            // Инициализация навигации
            initNavigation();
            
            // Инициализация форм
            initForms();
            
            // Заполнение списков кодексов
            populateCodexLists();
            
            // Загрузка данных в таблицы
            loadDataTables();
            
            // Обновление статистики
            updateStats();
            
            // Генерация ID для форм
            generateFormIds();
        });

        // Инициализация навигации
        function initNavigation() {
            // Навигация по разделам
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Убираем активный класс у всех элементов навигации
                    navItems.forEach(i => i.classList.remove('active'));
                    // Добавляем активный класс текущему элементу
                    this.classList.add('active');
                    
                    // Скрываем все разделы
                    document.querySelectorAll('.section-content').forEach(section => {
                        section.classList.remove('active');
                    });
                    
                    // Показываем выбранный раздел
                    const sectionId = this.getAttribute('data-section');
                    document.getElementById(sectionId).classList.add('active');
                });
            });
            
            // Вкладки в разделе действий
            const actionTabs = document.querySelectorAll('#actions .tab');
            actionTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Убираем активный класс у всех вкладок
                    actionTabs.forEach(t => t.classList.remove('active'));
                    // Добавляем активный класс текущей вкладке
                    this.classList.add('active');
                    
                    // Скрываем все формы
                    document.querySelectorAll('#actions .tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Показываем выбранную форму
                    const actionType = this.getAttribute('data-action-type');
                    document.getElementById(`${actionType}-form`).classList.add('active');
                });
            });
            
            // Вкладки в разделе отчетов
            const reportTabs = document.querySelectorAll('#reports .tab');
            reportTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Убираем активный класс у всех вкладок
                    reportTabs.forEach(t => t.classList.remove('active'));
                    // Добавляем активный класс текущей вкладке
                    this.classList.add('active');
                    
                    // Скрываем все таблицы отчетов
                    document.querySelectorAll('#reports .tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Показываем выбранную таблицу
                    const reportType = this.getAttribute('data-report-type');
                    document.getElementById(`${reportType}-reports`).classList.add('active');
                });
            });
        }

        // Инициализация форм
        function initForms() {
            // Обновление игрового дня
            const updateDayBtn = document.getElementById('update-day-btn');
            updateDayBtn.addEventListener('click', function() {
                currentGameDay = parseInt(document.getElementById('game-day-input').value);
                localStorage.setItem('mvd_gameDay', currentGameDay);
                showAlert('Игровой день обновлен!', 'success');
                updateLicenseStatuses();
                loadDataTables();
            });
            
            // Создание нового действия
            const newActionBtn = document.getElementById('new-action-btn');
            newActionBtn.addEventListener('click', function() {
                document.querySelector('[data-section="actions"]').click();
                generateFormIds();
            });
            
            // Изменение типа действия в форме ТС
            const actionTypeSelect = document.getElementById('action-type-select');
            actionTypeSelect.addEventListener('change', function() {
                const fineContainer = document.getElementById('fine-amount-container');
                if (this.value === 'fine') {
                    fineContainer.style.display = 'block';
                } else {
                    fineContainer.style.display = 'none';
                }
            });
            
            // Изменение типа действия в форме пешехода
            const pedestrianActionType = document.getElementById('pedestrian-action-type');
            pedestrianActionType.addEventListener('change', function() {
                const fineContainer = document.getElementById('pedestrian-fine-amount-container');
                if (this.value === 'fine') {
                    fineContainer.style.display = 'block';
                } else {
                    fineContainer.style.display = 'none';
                }
            });
            
            // Аккордеон для выбора статей
            const accordionHeader = document.getElementById('codex-accordion-header');
            accordionHeader.addEventListener('click', function() {
                const content = document.getElementById('codex-accordion-content');
                if (content.style.display === 'none') {
                    content.style.display = 'block';
                    this.querySelector('span:last-child').textContent = '▲';
                } else {
                    content.style.display = 'none';
                    this.querySelector('span:last-child').textContent = '▼';
                }
            });
            
            // Поиск по кодексам
            const codexSearch = document.getElementById('codex-search');
            codexSearch.addEventListener('input', function() {
                filterCodexItems(this.value);
            });
            
            // Сохранение действия с ТС
            const vehicleForm = document.getElementById('vehicle-action-form');
            vehicleForm.addEventListener('submit', function(e) {
                e.preventDefault();
                saveVehicleAction();
            });
            
            // Сохранение действия с пешеходом
            const pedestrianForm = document.getElementById('pedestrian-action-form');
            pedestrianForm.addEventListener('submit', function(e) {
                e.preventDefault();
                savePedestrianAction();
            });
            
            // Сохранение отчета о ДТП
            const accidentForm = document.getElementById('accident-report-form');
            accidentForm.addEventListener('submit', function(e) {
                e.preventDefault();
                saveAccidentReport();
            });
            
            // Сохранение отчета об аресте
            const arrestForm = document.getElementById('arrest-report-form');
            arrestForm.addEventListener('submit', function(e) {
                e.preventDefault();
                saveArrestReport();
            });
            
            // Очистка истории
            const clearHistoryBtn = document.getElementById('clear-history-btn');
            clearHistoryBtn.addEventListener('click', function() {
                const password = prompt('Введите пароль для очистки истории:');
                if (password === '121212') {
                    actions = [];
                    localStorage.setItem('mvd_actions', JSON.stringify(actions));
                    loadDataTables();
                    updateStats();
                    showAlert('История очищена!', 'success');
                } else {
                    showAlert('Неверный пароль!', 'error');
                }
            });
            
            // Добавление ВУ
            const addLicenseBtn = document.getElementById('add-license-btn');
            addLicenseBtn.addEventListener('click', function() {
                showLicenseForm();
            });
            
            // Отмена добавления ВУ
            const cancelLicenseBtn = document.getElementById('cancel-license-btn');
            cancelLicenseBtn.addEventListener('click', function() {
                document.getElementById('license-form').classList.add('hidden');
            });
            
            // Сохранение ВУ
            const licenseForm = document.getElementById('license-data-form');
            licenseForm.addEventListener('submit', function(e) {
                e.preventDefault();
                saveLicense();
            });
            
            // Поиск по ВУ
            const licenseSearch = document.getElementById('license-search');
            licenseSearch.addEventListener('input', function() {
                filterLicensesTable(this.value);
            });
            
            // Проверка ВУ
            const checkLicenseBtn = document.getElementById('check-license-btn');
            checkLicenseBtn.addEventListener('click', function() {
                checkLicense();
            });
            
            // Очистка форм
            document.getElementById('clear-form-btn').addEventListener('click', clearVehicleForm);
            document.getElementById('clear-pedestrian-form-btn').addEventListener('click', clearPedestrianForm);
            document.getElementById('clear-accident-form-btn').addEventListener('click', clearAccidentForm);
            document.getElementById('clear-arrest-form-btn').addEventListener('click', clearArrestForm);
            
            // Добавление участника ДТП
            document.getElementById('add-participant-btn').addEventListener('click', addAccidentParticipant);
            
            // Поиск по кодексам
            document.getElementById('road-code-search').addEventListener('input', function() {
                filterCodexTable('road-code-table', this.value);
            });
            
            document.getElementById('admin-code-search').addEventListener('input', function() {
                filterCodexTable('admin-code-table', this.value);
            });
            
            document.getElementById('criminal-code-search').addEventListener('input', function() {
                filterCodexTable('criminal-code-table', this.value);
            });
        }

        // Заполнение списков кодексов
        function populateCodexLists() {
            const dkList = document.getElementById('dk-list');
            const koapList = document.getElementById('koap-list');
            const ukList = document.getElementById('uk-list');
            
            // Дорожный кодекс
            roadCode.forEach(item => {
                const div = document.createElement('div');
                div.className = 'codex-item';
                div.textContent = `${item.article} - ${item.violation} (${item.penalty})`;
                div.addEventListener('click', function() {
                    document.getElementById('reason').value = `ДК РФ ст. ${item.article}: ${item.violation}`;
                    if (document.getElementById('action-type-select').value === 'fine') {
                        // Извлекаем числовое значение штрафа (если есть)
                        const penaltyMatch = item.penalty.match(/(\d+)/);
                        if (penaltyMatch) {
                            document.getElementById('fine-amount').value = penaltyMatch[1];
                        }
                    }
                    document.getElementById('codex-accordion-content').style.display = 'none';
                    document.getElementById('codex-accordion-header').querySelector('span:last-child').textContent = '▼';
                });
                dkList.appendChild(div);
            });
            
            // КОАП
            administrativeCode.forEach(item => {
                const div = document.createElement('div');
                div.className = 'codex-item';
                div.textContent = `${item.article} - ${item.violation} (${item.penalty})`;
                div.addEventListener('click', function() {
                    document.getElementById('reason').value = `КОАП РФ ст. ${item.article}: ${item.violation}`;
                    if (document.getElementById('action-type-select').value === 'fine') {
                        // Извлекаем числовое значение штрафа (если есть)
                        const penaltyMatch = item.penalty.match(/(\d+)/);
                        if (penaltyMatch) {
                            document.getElementById('fine-amount').value = penaltyMatch[1];
                        }
                    }
                    document.getElementById('codex-accordion-content').style.display = 'none';
                    document.getElementById('codex-accordion-header').querySelector('span:last-child').textContent = '▼';
                });
                koapList.appendChild(div);
            });
            
            // Уголовный кодекс
            criminalCode.forEach(item => {
                const div = document.createElement('div');
                div.className = 'codex-item';
                div.textContent = `${item.article} - ${item.violation} (${item.penalty})`;
                div.addEventListener('click', function() {
                    document.getElementById('reason').value = `УК РФ ст. ${item.article}: ${item.violation}`;
                    document.getElementById('codex-accordion-content').style.display = 'none';
                    document.getElementById('codex-accordion-header').querySelector('span:last-child').textContent = '▼';
                });
                ukList.appendChild(div);
            });
            
            // Заполнение таблиц кодексов
            populateCodexTable('road-code-table', roadCode);
            populateCodexTable('admin-code-table', administrativeCode);
            populateCodexTable('criminal-code-table', criminalCode);
        }

        // Заполнение таблицы кодекса
        function populateCodexTable(tableId, codexData) {
            const tbody = document.querySelector(`#${tableId} tbody`);
            tbody.innerHTML = '';
            
            codexData.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${item.article}</td>
                    <td>${item.violation}</td>
                    <td>${item.penalty}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Фильтрация таблицы кодекса
        function filterCodexTable(tableId, searchText) {
            const rows = document.querySelectorAll(`#${tableId} tbody tr`);
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                if (text.includes(searchText.toLowerCase())) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        // Фильтрация статей кодексов
        function filterCodexItems(searchText) {
            const items = document.querySelectorAll('.codex-item');
            items.forEach(item => {
                if (item.textContent.toLowerCase().includes(searchText.toLowerCase())) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Генерация ID для форм
        function generateFormIds() {
            document.getElementById('action-id').value = generateId('ACT');
            document.getElementById('pedestrian-action-id').value = generateId('PED');
            document.getElementById('accident-id').value = generateId('ACC');
            document.getElementById('arrest-id').value = generateId('ARR');
            document.getElementById('license-id').value = generateId('LIC');
        }

        // Показать форму для ВУ
        function showLicenseForm() {
            document.getElementById('license-form').classList.remove('hidden');
            document.getElementById('license-id').value = generateId('LIC');
            document.getElementById('license-issue-date').value = new Date().toLocaleDateString('ru-RU');
            document.getElementById('license-issue-game-day').value = currentGameDay;
            
            // Устанавливаем дату окончания на 10 лет вперед
            const futureDate = new Date();
            futureDate.setFullYear(futureDate.getFullYear() + 10);
            document.getElementById('license-valid-date').value = futureDate.toLocaleDateString('ru-RU');
            document.getElementById('license-valid-game-day').value = currentGameDay + 3650;
        }

        // Сохранение действия с ТС
        function saveVehicleAction() {
            const action = {
                id: document.getElementById('action-id').value,
                date: document.getElementById('action-date').value,
                type: 'vehicle',
                action: document.getElementById('action-type-select').value,
                reason: document.getElementById('reason').value,
                customReason: document.getElementById('custom-reason').value,
                vehicle: {
                    brand: document.getElementById('vehicle-brand').value,
                    model: document.getElementById('vehicle-model').value,
                    color: document.getElementById('vehicle-color').value,
                    plate: document.getElementById('vehicle-plate').value,
                    ownership: document.getElementById('vehicle-ownership').value
                },
                owner: {
                    name: document.getElementById('owner-name').value,
                    patronymic: document.getElementById('owner-patronymic').value,
                    passport: document.getElementById('owner-passport').value,
                    license: document.getElementById('owner-license').value
                },
                inspector: document.getElementById('inspector-name').value,
                fineAmount: document.getElementById('fine-amount').value || null
            };
            
            actions.push(action);
            localStorage.setItem('mvd_actions', JSON.stringify(actions));
            
            // Очистка формы
            clearVehicleForm();
            
            // Обновление таблиц
            loadDataTables();
            
            // Обновление статистики
            updateStats();
            
            // Показать уведомление
            showAlert('Действие успешно сохранено!', 'success');
        }

        // Сохранение действия с пешеходом
        function savePedestrianAction() {
            const action = {
                id: document.getElementById('pedestrian-action-id').value,
                date: document.getElementById('pedestrian-action-date').value,
                type: 'pedestrian',
                action: document.getElementById('pedestrian-action-type').value,
                reason: document.getElementById('pedestrian-reason').value,
                customReason: document.getElementById('pedestrian-custom-reason').value,
                person: {
                    name: document.getElementById('pedestrian-name').value,
                    patronymic: document.getElementById('pedestrian-patronymic').value,
                    passport: document.getElementById('pedestrian-passport').value,
                    address: document.getElementById('pedestrian-address').value
                },
                inspector: document.getElementById('pedestrian-inspector-name').value,
                fineAmount: document.getElementById('pedestrian-fine-amount').value || null
            };
            
            actions.push(action);
            localStorage.setItem('mvd_actions', JSON.stringify(actions));
            
            // Очистка формы
            clearPedestrianForm();
            
            // Обновление таблиц
            loadDataTables();
            
            // Обновление статистики
            updateStats();
            
            // Показать уведомление
            showAlert('Действие успешно сохранено!', 'success');
        }

        // Сохранение отчета о ДТП
        function saveAccidentReport() {
            const accident = {
                id: document.getElementById('accident-id').value,
                date: document.getElementById('accident-date').value,
                location: document.getElementById('accident-location').value,
                description: document.getElementById('accident-description').value,
                damage: document.getElementById('accident-damage').value,
                injured: document.getElementById('accident-injured').value,
                participants: [
                    {
                        name: document.getElementById('participant1-name').value,
                        license: document.getElementById('participant1-license').value,
                        vehicle: document.getElementById('participant1-vehicle').value,
                        insurance: document.getElementById('participant1-insurance').value
                    },
                    {
                        name: document.getElementById('participant2-name').value,
                        license: document.getElementById('participant2-license').value,
                        vehicle: document.getElementById('participant2-vehicle').value,
                        insurance: document.getElementById('participant2-insurance').value
                    }
                ],
                inspector: document.getElementById('accident-inspector-name').value
            };
            
            accidents.push(accident);
            localStorage.setItem('mvd_accidents', JSON.stringify(accidents));
            
            // Очистка формы
            clearAccidentForm();
            
            // Обновление таблиц
            loadDataTables();
            
            // Обновление статистики
            updateStats();
            
            // Показать уведомление
            showAlert('Отчет о ДТП успешно сохранен!', 'success');
        }

        // Сохранение отчета об аресте
        function saveArrestReport() {
            const arrest = {
                id: document.getElementById('arrest-id').value,
                date: document.getElementById('arrest-date').value,
                location: document.getElementById('arrest-location').value,
                reason: document.getElementById('arrest-reason').value,
                article: document.getElementById('arrest-article').value,
                arrested: {
                    name: document.getElementById('arrested-name').value,
                    patronymic: document.getElementById('arrested-patronymic').value,
                    passport: document.getElementById('arrested-passport').value,
                    address: document.getElementById('arrested-address').value,
                    birthdate: document.getElementById('arrested-birthdate').value
                },
                inspector: document.getElementById('arrest-inspector-name').value
            };
            
            arrests.push(arrest);
            localStorage.setItem('mvd_arrests', JSON.stringify(arrests));
            
            // Очистка формы
            clearArrestForm();
            
            // Обновление таблиц
            loadDataTables();
            
            // Обновление статистики
            updateStats();
            
            // Показать уведомление
            showAlert('Отчет об аресте успешно сохранен!', 'success');
        }

        // Сохранение ВУ
        function saveLicense() {
            const selectedCategories = Array.from(document.querySelectorAll('input[name="license-category"]:checked'))
                .map(cb => cb.value);
            
            const license = {
                id: document.getElementById('license-id').value,
                name: document.getElementById('license-name').value,
                patronymic: document.getElementById('license-patronymic').value,
                passport: document.getElementById('license-passport').value,
                number: document.getElementById('license-number').value,
                issueDate: document.getElementById('license-issue-date').value,
                issueGameDay: parseInt(document.getElementById('license-issue-game-day').value),
                validDate: document.getElementById('license-valid-date').value,
                validGameDay: parseInt(document.getElementById('license-valid-game-day').value),
                categories: selectedCategories,
                status: document.getElementById('license-status').value
            };
            
            // Проверяем, это новое ВУ или редактирование
            const existingIndex = licenses.findIndex(l => l.id === license.id);
            if (existingIndex >= 0) {
                licenses[existingIndex] = license;
            } else {
                licenses.push(license);
            }
            
            localStorage.setItem('mvd_licenses', JSON.stringify(licenses));
            
            // Очистка формы
            document.getElementById('license-data-form').reset();
            document.getElementById('license-form').classList.add('hidden');
            
            // Обновление таблицы
            loadDataTables();
            
            // Обновление статистики
            updateStats();
            
            // Показать уведомление
            showAlert('Водительское удостоверение успешно сохранено!', 'success');
        }

        // Проверка ВУ
        function checkLicense() {
            const licenseNumber = document.getElementById('owner-license').value;
            if (!licenseNumber) {
                showAlert('Введите номер водительского удостоверения', 'error');
                return;
            }
            
            const license = licenses.find(l => l.number === licenseNumber);
            const resultDiv = document.getElementById('license-check-result');
            
            if (license) {
                // Проверяем действительность ВУ
                const isValid = license.validGameDay >= currentGameDay && license.status === 'active';
                const statusText = isValid ? 'действительно' : 'недействительно';
                const statusClass = isValid ? 'status-active' : 'status-inactive';
                
                resultDiv.innerHTML = `
                    <div class="alert ${isValid ? 'alert-success' : 'alert-error'}">
                        <i class="fas fa-${isValid ? 'check-circle' : 'exclamation-circle'}"></i>
                        <div>
                            <strong>ВУ найдено:</strong> ${license.name} ${license.patronymic}<br>
                            <strong>№ паспорта:</strong> ${license.passport}<br>
                            <strong>Действительно до:</strong> ${license.validDate} (игр. день: ${license.validGameDay})<br>
                            <strong>Категории:</strong> ${license.categories.join(', ')}<br>
                            <strong>Статус:</strong> <span class="status-badge ${statusClass}">${statusText}</span>
                        </div>
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div class="alert alert-error">
                        <i class="fas fa-exclamation-circle"></i>
                        <div>
                            Водительское удостоверение с номером ${licenseNumber} не найдено в базе данных.
                        </div>
                    </div>
                `;
            }
        }

        // Обновление статусов ВУ на основе текущего игрового дня
        function updateLicenseStatuses() {
            licenses.forEach(license => {
                if (license.validGameDay < currentGameDay) {
                    license.status = 'inactive';
                }
            });
            localStorage.setItem('mvd_licenses', JSON.stringify(licenses));
        }

        // Загрузка данных в таблицы
        function loadDataTables() {
            loadRecentActionsTable();
            loadActionsHistoryTable();
            loadLicensesTable();
            loadAccidentsTable();
            loadArrestsTable();
        }

        // Загрузка таблицы последних действий
        function loadRecentActionsTable() {
            const tbody = document.querySelector('#recent-actions-table tbody');
            tbody.innerHTML = '';
            
            const recentActions = actions.slice(-5).reverse();
            
            if (recentActions.length === 0) {
                document.getElementById('recent-empty-state').classList.remove('hidden');
                return;
            } else {
                document.getElementById('recent-empty-state').classList.add('hidden');
            }
            
            recentActions.forEach(action => {
                const tr = document.createElement('tr');
                let object = '-';
                
                if (action.type === 'vehicle') {
                    object = `${action.vehicle.brand} ${action.vehicle.model} (${action.vehicle.plate})`;
                } else if (action.type === 'pedestrian') {
                    object = `${action.person.name} ${action.person.patronymic}`;
                }
                
                tr.innerHTML = `
                    <td>${action.id}</td>
                    <td>${action.date}</td>
                    <td>${action.type === 'vehicle' ? 'ТС' : 'Пеший'}</td>
                    <td>${getActionText(action.action)}</td>
                    <td>${object}</td>
                    <td>${action.inspector}</td>
                `;
                
                tbody.appendChild(tr);
            });
        }

        // Загрузка таблицы истории действий
        function loadActionsHistoryTable() {
            const tbody = document.querySelector('#actions-history-table tbody');
            tbody.innerHTML = '';
            
            if (actions.length === 0) {
                document.getElementById('history-empty-state').classList.remove('hidden');
                return;
            } else {
                document.getElementById('history-empty-state').classList.add('hidden');
            }
            
            actions.forEach(action => {
                const tr = document.createElement('tr');
                let object = '-';
                
                if (action.type === 'vehicle') {
                    object = `${action.vehicle.brand} ${action.vehicle.model} (${action.vehicle.plate})`;
                } else if (action.type === 'pedestrian') {
                    object = `${action.person.name} ${action.person.patronymic}`;
                }
                
                tr.innerHTML = `
                    <td>${action.id}</td>
                    <td>${action.date}</td>
                    <td>${action.type === 'vehicle' ? 'ТС' : 'Пеший'}</td>
                    <td>${getActionText(action.action)}</td>
                    <td>${object}</td>
                    <td>${action.reason}</td>
                    <td>${action.inspector}</td>
                    <td class="action-buttons">
                        <button class="btn btn-sm" onclick="editAction('${action.id}')">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteAction('${action.id}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                
                tbody.appendChild(tr);
            });
        }

        // Загрузка таблицы ВУ
        function loadLicensesTable() {
            const tbody = document.querySelector('#licenses-table tbody');
            tbody.innerHTML = '';
            
            if (licenses.length === 0) {
                document.getElementById('licenses-empty-state').classList.remove('hidden');
                return;
            } else {
                document.getElementById('licenses-empty-state').classList.add('hidden');
            }
            
            licenses.forEach(license => {
                // Проверяем действительность ВУ
                const isValid = license.validGameDay >= currentGameDay && license.status === 'active';
                const statusText = isValid ? 'Действительно' : 'Недействительно';
                const statusClass = isValid ? 'status-active' : 'status-inactive';
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${license.number}</td>
                    <td>${license.name} ${license.patronymic}</td>
                    <td>${license.passport}</td>
                    <td>${license.issueDate} (${license.issueGameDay})</td>
                    <td>${license.validDate} (${license.validGameDay})</td>
                    <td>
                        <div class="categories">
                            ${license.categories.map(cat => `<span class="category">${cat}</span>`).join('')}
                        </div>
                    </td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td class="action-buttons">
                        <button class="btn btn-sm" onclick="editLicense('${license.id}')">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteLicense('${license.id}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                
                tbody.appendChild(tr);
            });
        }

        // Загрузка таблицы ДТП
        function loadAccidentsTable() {
            const tbody = document.querySelector('#accidents-table tbody');
            tbody.innerHTML = '';
            
            if (accidents.length === 0) {
                document.getElementById('accidents-empty-state').classList.remove('hidden');
                return;
            } else {
                document.getElementById('accidents-empty-state').classList.add('hidden');
            }
            
            accidents.forEach(accident => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${accident.id}</td>
                    <td>${accident.date}</td>
                    <td>${accident.location}</td>
                    <td>${accident.participants.map(p => p.name).join(', ')}</td>
                    <td>${accident.damage.substring(0, 50)}${accident.damage.length > 50 ? '...' : ''}</td>
                    <td>${accident.inspector}</td>
                    <td class="action-buttons">
                        <button class="btn btn-sm" onclick="viewAccident('${accident.id}')">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteAccident('${accident.id}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                
                tbody.appendChild(tr);
            });
        }

        // Загрузка таблицы арестов
        function loadArrestsTable() {
            const tbody = document.querySelector('#arrests-table tbody');
            tbody.innerHTML = '';
            
            if (arrests.length === 0) {
                document.getElementById('arrests-empty-state').classList.remove('hidden');
                return;
            } else {
                document.getElementById('arrests-empty-state').classList.add('hidden');
            }
            
            arrests.forEach(arrest => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${arrest.id}</td>
                    <td>${arrest.date}</td>
                    <td>${arrest.arrested.name} ${arrest.arrested.patronymic}</td>
                    <td>${arrest.location}</td>
                    <td>${arrest.article}</td>
                    <td>${arrest.inspector}</td>
                    <td class="action-buttons">
                        <button class="btn btn-sm" onclick="viewArrest('${arrest.id}')">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteArrest('${arrest.id}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                
                tbody.appendChild(tr);
            });
        }

        // Фильтрация таблицы ВУ
        function filterLicensesTable(searchText) {
            const rows = document.querySelectorAll('#licenses-table tbody tr');
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                if (text.includes(searchText.toLowerCase())) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        // Обновление статистики
        function updateStats() {
            document.getElementById('total-actions').textContent = actions.length;
            document.getElementById('total-licenses').textContent = licenses.length;
            document.getElementById('total-accidents').textContent = accidents.length;
            document.getElementById('total-arrests').textContent = arrests.length;
        }

        // Очистка форм
        function clearVehicleForm() {
            document.getElementById('vehicle-action-form').reset();
            document.getElementById('fine-amount-container').style.display = 'none';
            document.getElementById('license-check-result').innerHTML = '';
            generateFormIds();
        }

        function clearPedestrianForm() {
            document.getElementById('pedestrian-action-form').reset();
            document.getElementById('pedestrian-fine-amount-container').style.display = 'none';
            generateFormIds();
        }

        function clearAccidentForm() {
            document.getElementById('accident-report-form').reset();
            generateFormIds();
        }

        function clearArrestForm() {
            document.getElementById('arrest-report-form').reset();
            generateFormIds();
        }

        // Добавление участника ДТП
        function addAccidentParticipant() {
            const participantsContainer = document.getElementById('accident-participants');
            const participantCount = participantsContainer.children.length + 1;
            
            const participantForm = document.createElement('div');
            participantForm.className = 'participant-form';
            participantForm.innerHTML = `
                <h4>Участник ${participantCount}</h4>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label for="participant${participantCount}-name">ФИО</label>
                            <input type="text" id="participant${participantCount}-name">
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label for="participant${participantCount}-license">ВУ</label>
                            <input type="text" id="participant${participantCount}-license">
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label for="participant${participantCount}-vehicle">ТС</label>
                            <input type="text" id="participant${participantCount}-vehicle" placeholder="Марка, модель, госномер">
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label for="participant${participantCount}-insurance">Страховка</label>
                            <input type="text" id="participant${participantCount}-insurance" placeholder="Номер полиса ОСАГО">
                        </div>
                    </div>
                </div>
            `;
            
            participantsContainer.appendChild(participantForm);
        }

        // Вспомогательные функции
        function generateId(prefix) {
            return prefix + '-' + Math.random().toString(36).substr(2, 9).toUpperCase();
        }

        function getActionText(action) {
            const actions = {
                'stop': 'Остановка Т/С',
                'fine': 'Административный штраф',
                'license-revoke': 'Лишение водительского удостоверения',
                'check': 'Проверка документов',
                'detention': 'Задержание'
            };
            return actions[action] || action;
        }

        function showAlert(message, type) {
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
                <div>${message}</div>
            `;
            
            document.querySelector('.main-content').insertBefore(alert, document.querySelector('.main-content').firstChild);
            
            setTimeout(() => {
                alert.remove();
            }, 5000);
        }

        // Функции для работы с действиями
        function editAction(id) {
            const action = actions.find(a => a.id === id);
            if (action) {
                document.querySelector('[data-section="actions"]').click();
                
                if (action.type === 'vehicle') {
                    document.querySelector('[data-action-type="vehicle"]').click();
                    
                    // Заполняем форму данными
                    document.getElementById('action-id').value = action.id;
                    document.getElementById('action-date').value = action.date;
                    document.getElementById('action-type-select').value = action.action;
                    document.getElementById('reason').value = action.reason;
                    document.getElementById('custom-reason').value = action.customReason || '';
                    
                    if (action.vehicle) {
                        document.getElementById('vehicle-brand').value = action.vehicle.brand;
                        document.getElementById('vehicle-model').value = action.vehicle.model;
                        document.getElementById('vehicle-color').value = action.vehicle.color;
                        document.getElementById('vehicle-plate').value = action.vehicle.plate;
                        document.getElementById('vehicle-ownership').value = action.vehicle.ownership;
                    }
                    
                    if (action.owner) {
                        document.getElementById('owner-name').value = action.owner.name;
                        document.getElementById('owner-patronymic').value = action.owner.patronymic;
                        document.getElementById('owner-passport').value = action.owner.passport;
                        document.getElementById('owner-license').value = action.owner.license || '';
                    }
                    
                    document.getElementById('inspector-name').value = action.inspector;
                    
                    if (action.fineAmount) {
                        document.getElementById('fine-amount').value = action.fineAmount;
                        document.getElementById('fine-amount-container').style.display = 'block';
                    }
                } else if (action.type === 'pedestrian') {
                    document.querySelector('[data-action-type="pedestrian"]').click();
                    
                    // Заполняем форму данными
                    document.getElementById('pedestrian-action-id').value = action.id;
                    document.getElementById('pedestrian-action-date').value = action.date;
                    document.getElementById('pedestrian-action-type').value = action.action;
                    document.getElementById('pedestrian-reason').value = action.reason;
                    document.getElementById('pedestrian-custom-reason').value = action.customReason || '';
                    
                    if (action.person) {
                        document.getElementById('pedestrian-name').value = action.person.name;
                        document.getElementById('pedestrian-patronymic').value = action.person.patronymic;
                        document.getElementById('pedestrian-passport').value = action.person.passport;
                        document.getElementById('pedestrian-address').value = action.person.address || '';
                    }
                    
                    document.getElementById('pedestrian-inspector-name').value = action.inspector;
                    
                    if (action.fineAmount) {
                        document.getElementById('pedestrian-fine-amount').value = action.fineAmount;
                        document.getElementById('pedestrian-fine-amount-container').style.display = 'block';
                    }
                }
            }
        }

        function deleteAction(id) {
            const password = prompt('Введите пароль для удаления действия:');
            if (password === '121212') {
                actions = actions.filter(a => a.id !== id);
                localStorage.setItem('mvd_actions', JSON.stringify(actions));
                loadDataTables();
                updateStats();
                showAlert('Действие удалено!', 'success');
            } else {
                showAlert('Неверный пароль!', 'error');
            }
        }

        // Функции для работы с ВУ
        function editLicense(id) {
            const license = licenses.find(l => l.id === id);
            if (license) {
                showLicenseForm();
                
                // Заполняем форму данными
                document.getElementById('license-id').value = license.id;
                document.getElementById('license-name').value = license.name;
                document.getElementById('license-patronymic').value = license.patronymic;
                document.getElementById('license-passport').value = license.passport;
                document.getElementById('license-number').value = license.number;
                document.getElementById('license-issue-date').value = license.issueDate;
                document.getElementById('license-issue-game-day').value = license.issueGameDay;
                document.getElementById('license-valid-date').value = license.validDate;
                document.getElementById('license-valid-game-day').value = license.validGameDay;
                document.getElementById('license-status').value = license.status;
                
                // Снимаем все галочки категорий
                document.querySelectorAll('input[name="license-category"]').forEach(cb => {
                    cb.checked = false;
                });
                
                // Ставим галочки на нужные категории
                license.categories.forEach(cat => {
                    const checkbox = document.querySelector(`input[name="license-category"][value="${cat}"]`);
                    if (checkbox) checkbox.checked = true;
                });
            }
        }

        function deleteLicense(id) {
            const password = prompt('Введите пароль для удаления ВУ:');
            if (password === '121212') {
                licenses = licenses.filter(l => l.id !== id);
                localStorage.setItem('mvd_licenses', JSON.stringify(licenses));
                loadDataTables();
                updateStats();
                showAlert('Водительское удостоверение удалено!', 'success');
            } else {
                showAlert('Неверный пароль!', 'error');
            }
        }

        // Функции для работы с ДТП
        function viewAccident(id) {
            const accident = accidents.find(a => a.id === id);
            if (accident) {
                let participantsText = '';
                accident.participants.forEach((p, index) => {
                    participantsText += `Участник ${index + 1}: ${p.name}, ВУ: ${p.license}, ТС: ${p.vehicle}, Страховка: ${p.insurance}\n`;
                });
                
                alert(`Отчет о ДТП #${accident.id}\n\nДата: ${accident.date}\nМесто: ${accident.location}\n\nОписание: ${accident.description}\n\nУщерб: ${accident.damage}\n\nПострадавшие: ${accident.injured}\n\nУчастники:\n${participantsText}\nИнспектор: ${accident.inspector}`);
            }
        }

        function deleteAccident(id) {
            const password = prompt('Введите пароль для удаления отчета о ДТП:');
            if (password === '121212') {
                accidents = accidents.filter(a => a.id !== id);
                localStorage.setItem('mvd_accidents', JSON.stringify(accidents));
                loadDataTables();
                updateStats();
                showAlert('Отчет о ДТП удален!', 'success');
            } else {
                showAlert('Неверный пароль!', 'error');
            }
        }

        // Функции для работы с арестами
        function viewArrest(id) {
            const arrest = arrests.find(a => a.id === id);
            if (arrest) {
                alert(`Отчет об аресте #${arrest.id}\n\nДата: ${arrest.date}\nМесто: ${arrest.location}\n\nЗадержанный: ${arrest.arrested.name} ${arrest.arrested.patronymic}\nПаспорт: ${arrest.arrested.passport}\nАдрес: ${arrest.arrested.address}\nДата рождения: ${arrest.arrested.birthdate}\n\nОснование: ${arrest.reason}\nСтатья: ${arrest.article}\n\nИнспектор: ${arrest.inspector}`);
            }
        }

        function deleteArrest(id) {
            const password = prompt('Введите пароль для удаления отчета об аресте:');
            if (password === '121212') {
                arrests = arrests.filter(a => a.id !== id);
                localStorage.setItem('mvd_arrests', JSON.stringify(arrests));
                loadDataTables();
                updateStats();
                showAlert('Отчет об аресте удален!', 'success');
            } else {
                showAlert('Неверный пароль!', 'error');
            }
        }
    </script>
</body>
</html>
